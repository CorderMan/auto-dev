<idea-plugin package="cc.unitmesh.diagram">
    <!--suppress PluginXmlValidity -->
    <dependencies>
        <plugin id="com.intellij.diagram"/>
    </dependencies>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Register file types -->
        <fileType name="DOT" implementationClass="cc.unitmesh.diagram.graphviz.DotFileType"
                  fieldName="INSTANCE" extensions="dot;gv;graphviz"/>
        <fileType name="Mermaid" implementationClass="cc.unitmesh.diagram.graphviz.MermaidFileType"
                  fieldName="INSTANCE" extensions="mmd;mermaid"/>

        <!-- Register Graphviz diagram provider -->
        <diagram.Provider implementation="cc.unitmesh.diagram.graphviz.GraphvizUmlProvider"/>

        <!-- Register project service -->
        <projectService serviceImplementation="cc.unitmesh.diagram.graphviz.GraphvizDiagramService"/>

        <!-- Register file editor providers -->
        <fileEditorProvider implementation="cc.unitmesh.diagram.graphviz.editor.GraphvizSplitEditorProvider"/>
        <fileEditorProvider implementation="cc.unitmesh.diagram.graphviz.editor.MermaidSplitEditorProvider"/>
    </extensions>

    <extensions defaultExtensionNs="cc.unitmesh">
        <!-- Register Graphviz language sketch provider -->
        <langSketchProvider implementation="cc.unitmesh.diagram.graphviz.GraphvizSketchProvider"/>
    </extensions>
</idea-plugin>
